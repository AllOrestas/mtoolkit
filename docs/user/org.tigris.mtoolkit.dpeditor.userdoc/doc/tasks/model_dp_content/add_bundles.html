<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Adding Bundle Resources</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="../../book.css" rel="stylesheet" type="text/css">
</head>
<body> 
<h1>Adding Bundle Resources </h1> 
<p>Since deployment packages can contain bundle resources, the Deployment Package Editor enables you to add different OSGi bundles in the Deployment Package Project file and modify their properties. Information about the contained resources is placed in the so-called <i>Name section</i> of the manifest file and can be viewed in the <b>Manifest</b> tab of the Deployment Package Editor. By default, the initially created Deployment Package Project file holds no bundle entries.</p>
<p>The bundles which you will add to a deployment package might be in either of the following formats:</p>
<ul>
  <li>Ready bundle JAR file - When the deployment package is generated, the bundle JAR file will be directly included in the package without additional generation.</li>
  <li>Plug-in project opened in the active workspace - When the deployment package is generated, first the plug-in project will be built and a bundle JAR file will be exported from the project. Then, the produced JAR file will be included in the package.</li>
</ul>
<p>To add a new bundle resource to a Deployment Package Project file:</p> 
<ol> 
  <li>Launch the Deployment Package Editor by double-clicking on a Deployment Package Project file (<b>.dpp</b>) in one of the navigation views.</li> 
  <li>Go to the <b>Bundles</b> tab in the activated editor.</li> 
  <li>To add a bundle to the package, click the <b>New</b> button. An empty row appears in the bundle table.</li> 
  <li> In the empty row specify the following properties for the bundle resources contained in the targeted deployment package:
    <ul> 
      <li><b>Bundle Path</b> - Use the <b>Browse</b> (<b>...</b>) button in the <b>Bundle Path</b> column of the bundle resource to browse for a bundle JAR  file (<b>.jar</b>) or for a plug-in project  file (<b>.project</b>) in the file system or type the bundle path by hand. In case the bundle resource is located in the currently selected project, it is represented by a relative path to its JAR file or to its project file, i.e. <b>&lt;.&gt;\&lt;bundle_name&gt;.jar</b>.</li> 
      <li><b>Name</b> - Specify the path name of the bundle resource within the targeted deployment package JAR by typing it in the <b>Name </b> column of the bundle. This section holds the value of the <i>Name</i> manifest header of the deployment package. The default path name is <b>bundles/&lt;bundle_name&gt;.jar</b>. </li> 
      <li><b>Symbolic Name</b> - The Deployment Package Editor automatically retrieves and shows in the table the value of the <i>Bundle-SymbolicName</i> manifest header. In case, this header is not mentioned in the resource manifest file or the bundle resource itself is not available, enter a value for the symbolic name of the bundle.</li> 
      <li><b>Version</b> - The Deployment Package Editor retrieves the value of the <i>Bundle-Version</i> manifest header of the resource and automatically fills it in the empty cell for the bundle. In case, this  header is not mentioned in the manifest file of the added bundle or the bundle resource itself does not exist, type the version of the bundle resource following the convention introduced in the OSGi Specification.</li> 
      <li><b>Customizer</b> - Select one of the options from the drop-down list to indicate whether the added bundle holds Resource Processors which handle the included in this deployment package non-bundle resources at install and uninstall time.</li> 
      <li><b>Missing</b> - Select the <i>true</i> option of the drop-down list to indicate that the bundle is logically a part of the generated deployment package, but is not physically included in the deployment package JAR file. Such bundles are only mentioned in the <i>Name section </i> of the manifest file of a Fix Package. It is a variety of a deployment package used to quickly upgrade or downgrade an existing deployment package  and all bundle resources marked as <i>missing </i> should be available in the initial version of this deployment package. The purpose of including such bundle resources in the manifest file of a deployment package is to distinguish between resources that will not be changed and resources that must be removed.</li>
      <li><b>Custom Headers</b> - Enter some additional custom headers by using the <b>Browse</b> (<b>...</b>) button in the <b>Custom Headers</b> column of the bundle resource. In the displayed <b>Bundle Custom Headers </b>dialog, use the <b>New</b> button to add a new empty row in the table. Then type by hand the header name in the text field under the <b>Key</b> column and the header value in the text field under the <b>Value </b>column. When ready, click <b>OK</b>.</li> 
    </ul>
  </li>
  <br><p><img src="img/add_bundles.gif" width="724" height="355"><br> 
    Figure 1: Adding bundle resources to a deployment package.<br> 
  </p> 
  <li>Save the Deployment Package Project file to store the changes made in connection with the bundle resources present in the targeted deployment package.</li> 
</ol> 
<h2><a name="update"></a>Automatic Update Detection </h2>
<p>If a bundle, added to a deployment package, is generated from an Eclipse plug-in project with its JAR file name following the versioning convention implemented in the Eclipse plug-in development environment (PDE), the  Deployment Package Editor will automatically detect changes in the  version segment of the JAR file name and will consider such changes as JAR file updates. In such case, when you open a Deployment Package Project file or try to create a deployment package which contains bundle resources with changed  file names, the editor informs you of this change by displaying the following dialog:</p>
<p><img src="img/change_bundle_name.gif" width="450" height="300"><br>
  Figure 2: Detected changes in the JAR file names of bundle resources participating in a deployment package. </p>
<p>It is recommended, but not obligatory,  to use  the newly discovered JAR file updates. Otherwise, your attempts to create a deployment package JAR holding bundle resources updated in this way will fail as the editor will not be able to locate them in the file system.</p>
<p class="Note">Tip: To automatically accept bundle updates related to the version part of bundle file names, check the <b>Accept bundle version updates automatically</b> box in the mTookit preferences. See &quot;<a href="../configure_dp_editor.html">Configuring Deployment Package Editor</a>&quot; for information about Deployment Package Editor preferences. </p>
<h2>Common Errors</h2>
<p>When adding new bundle resources to a deployment package, you may encounter some error messages. They may have to do with the following most common errors:</p>
<ul><li>Missing bundle resource symbolic name </li>
  <li>Missing bundle resource version. </li>
</ul>
<p><img src="../../ngrelc00.gif" width="159" height="27"></p> 
<p><a href="../../concepts/dp_overview.html">Deployment Package Overview</a><br> 
  <a href="../../concepts/dpeditor.html">Deployment Package Editor</a> 
<p><img src="../../ngrelt00.gif" width="159" height="27"></p> 
<p><a href="../create_dpp.html">Creating a Deployment Package Project File</a><br> 
  <a href="../generate_dp.html">Generating a Deployment Package</a><br> 
  <a href="../quick_build.html">Quick Deployment Package Build</a><br> 
  <a href="../export_build_files.html">Exporting Deployment Package Build Files</a><br> 
<a href="../configure_dp_editor.html">Configuring Deployment Package Editor</a><br>
<a href="../PLUGINS_ROOT/org.eclipse.pde.doc.user/guide/tools/project_wizards/new_plugin_project.htm">Plug-in Project</a><br>
<a href="../PLUGINS_ROOT/org.eclipse.pde.doc.user/guide/tools/project_wizards/plugin_from_archives.htm">Plug-in Project from Existing JAR Archives</a> </p> 
<p><img src="../../copyright.gif" width="399" height="17"></p> 
</body>
</html>
